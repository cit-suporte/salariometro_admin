(self.webpackChunkfipe_salariometro=self.webpackChunkfipe_salariometro||[]).push([[867],{6867:(e,t,s)=>{"use strict";s.r(t),s.d(t,{LiberacaoModule:()=>_});var i=s(8583);class n{constructor(e){this.mes=e}}var r=s(665),o=s(639),a=s(327);let l=(()=>{class e extends a.e{constructor(e){super("api/liberacao",e),this.injetor=e}getMes(){return this.http.get(`${this.url}/meses`)}putLiberacaoMes(e){return this.http.put(`${this.url}/UpdateMes`,e)}updateSituacao(e,t){return this.http.put(`${this.url}/${e}/${t}`,{params:{}})}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(o.zs3))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var u=s(9344),c=s(9866),p=s(4719),Z=s(4494),g=s(7930),d=s(3013),m=s(3928);function f(e,t){if(1&e&&(o.TgZ(0,"option"),o._uU(1),o.qZA()),2&e){const e=t.$implicit;o.xp6(1),o.Oqu(e.mes)}}function b(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"tr"),o.TgZ(1,"th",20),o._uU(2," Transac\xe3o "),o._UZ(3,"p-sortIcon",21),o.qZA(),o.TgZ(4,"th",22),o._uU(5," M\xeas "),o._UZ(6,"p-sortIcon",23),o.qZA(),o.TgZ(7,"th",24),o._uU(8," Ano "),o._UZ(9,"p-sortIcon",25),o.qZA(),o.TgZ(10,"th",26),o._uU(11,"Status"),o.qZA(),o.qZA(),o.TgZ(12,"tr"),o.TgZ(13,"th"),o.TgZ(14,"input",27),o.NdJ("input",function(t){let s;return o.CHM(e),o.oxw(),o.MAs(21).filter(null==(s=t.target)?null:s.value,"dsTransacao","contains")}),o.qZA(),o.qZA(),o.TgZ(15,"th"),o.TgZ(16,"input",28),o.NdJ("input",function(t){let s;return o.CHM(e),o.oxw(),o.MAs(21).filter(null==(s=t.target)?null:s.value,"nuMes","contains")}),o.qZA(),o.qZA(),o.TgZ(17,"th"),o.TgZ(18,"input",29),o.NdJ("input",function(t){let s;return o.CHM(e),o.oxw(),o.MAs(21).filter(null==(s=t.target)?null:s.value,"nuAno","contains")}),o.qZA(),o.qZA(),o._UZ(19,"th"),o.qZA()}if(2&e){o.oxw();const e=o.MAs(21);o.xp6(14),o.Q6J("value",null==e.filters.dsTransacao?null:e.filters.dsTransacao.value),o.xp6(2),o.Q6J("value",null==e.filters.nuMes?null:e.filters.nuMes.value),o.xp6(2),o.Q6J("value",null==e.filters.nuAno?null:e.filters.nuAno.value)}}function h(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"small",32),o._uU(1," Deseja Liberar? "),o.TgZ(2,"button",37),o.NdJ("click",function(){o.CHM(e);const t=o.oxw().$implicit;return o.oxw().fnAlterarSituacao(t)}),o._uU(3," Sim "),o.qZA(),o.qZA()}}function A(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"small",32),o._uU(1," Cancelar Libera\xe7\xe3o? "),o.TgZ(2,"button",38),o.NdJ("click",function(){o.CHM(e);const t=o.oxw().$implicit;return o.oxw().fnAlterarSituacao(t)}),o._uU(3," Sim "),o.qZA(),o.qZA()}}function T(e,t){if(1&e&&(o.TgZ(0,"tr",30),o.TgZ(1,"td"),o.TgZ(2,"span",31),o._uU(3,"Transa\xe7\xe3o"),o.qZA(),o.TgZ(4,"span"),o._uU(5),o.qZA(),o.qZA(),o.TgZ(6,"td",32),o.TgZ(7,"span",31),o._uU(8,"Mes"),o.qZA(),o.TgZ(9,"span",33),o._uU(10),o.qZA(),o.qZA(),o.TgZ(11,"td",32),o.TgZ(12,"span",31),o._uU(13,"Ano"),o.qZA(),o.TgZ(14,"span",34),o._uU(15),o.qZA(),o.qZA(),o.TgZ(16,"td",32),o.TgZ(17,"span",31),o._uU(18,"Status"),o.qZA(),o.TgZ(19,"strong",35),o._uU(20),o.qZA(),o._UZ(21,"br"),o.YNc(22,h,4,0,"small",36),o.YNc(23,A,4,0,"small",36),o.qZA(),o.qZA()),2&e){const e=t.$implicit;o.Q6J("pSelectableRow",e),o.xp6(5),o.hij(" ",e.dsTransacao," "),o.xp6(5),o.Oqu(e.nuMes),o.xp6(5),o.Oqu(e.nuAno),o.xp6(4),o.ekj("text-success",e.icLiberado)("text-danger",!e.icLiberado),o.xp6(1),o.hij(" ",e.icLiberado?"Liberado":"N\xe3o Liberado"," "),o.xp6(2),o.Q6J("ngIf",!e.icLiberado),o.xp6(1),o.Q6J("ngIf",e.icLiberado)}}function q(e,t){1&e&&(o.TgZ(0,"tr"),o.TgZ(1,"td",39),o._uU(2,"N\xe3o foram encontrados Boletins."),o.qZA(),o.qZA())}const x=[{path:"",component:(()=>{class e{constructor(e,t,s,i,r,o){this.liberacaoService=e,this.fb=t,this.toastr=s,this.spinner=i,this.sessionService=r,this.router=o,this.mes=new n("")}ngOnInit(){const e=JSON.parse(sessionStorage.getItem("sessao_usuario")||"{}");void 0===e.nmUsuario?this.router.navigate(["login"]):"Admin"!==e.dsPerfil&&this.router.navigate(["home"]),e.flAlteraSenha&&this.router.navigate(["senha"]),this.form=this.fb.group({mes_liberacao:["",[r.kI.required]]}),this.getLiberacoes(),this.getMeses()}fnAlterarSituacao(e){e.icLiberado=!e.icLiberado,this.spinner.show(),this.liberacaoService.updateSituacao(e.idParametroAtualizacao,e.icLiberado).subscribe(e=>{this.spinner.hide(),this.toastr.success("Status modificado")},e=>{this.toastr.error("Ocorreu um erro no processo. Tente novamente em alguns instantes!"),this.spinner.hide()})}seeThis(){var e;const t=null===(e=this.form.get("mes_liberacao"))||void 0===e?void 0:e.value;""==t||(this.spinner.show(),this.mes.mes=t,this.liberacaoService.putLiberacaoMes(this.mes).subscribe(e=>{this.getLiberacoes(),this.getMeses(),this.spinner.hide()}))}getLiberacoes(){this.liberacaoService.getAll().subscribe(e=>{this.liberacoes=e})}getMeses(){this.liberacaoService.getMes().subscribe(e=>{this.meses=e})}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(l),o.Y36(r.qu),o.Y36(u._W),o.Y36(c.t2),o.Y36(p.m),o.Y36(Z.F0))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-liberacao-list"]],decls:26,vars:8,consts:[[1,"row","pb-4"],[1,"col-md-6"],[1,"h2"],[1,"col","md-6"],[1,"form-row","pb-4"],[1,"form-inline",3,"formGroup"],[1,"form-group"],["for","staticMes"],[1,"form-group","mx-sm-3","mb-2"],["for","inputMes",1,"sr-only"],["id","inputMes","formControlName","mes_liberacao",1,"form-control"],["value",""],[4,"ngFor","ngForOf"],["type","button",1,"btn","btn-primary","mb-2",3,"disabled","click"],[1,"card"],["selectionMode","single","dataKey","id","styleClass","p-datatable-gridlines",3,"value","selection","responsive","rows","paginator","selectionChange"],["dt1",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pSortableColumn","dsTransacao",1,"text-center"],["field","dsTransacao"],["pSortableColumn","nuMes",1,"text-center"],["field","nuMes"],["pSortableColumn","nuAno",1,"text-center"],["field","nuAno"],["pSortableColumn","icLiberado",1,"text-center"],["pInputText","","type","text","placeholder","pesquisar por transa\xe7\xe3o",1,"p-column-filter","form-control-plaintext",3,"value","input"],["pInputText","","type","text","placeholder","pesquisar detalhes",1,"p-column-filter","form-control-plaintext",3,"value","input"],["pInputText","","type","text","placeholder","pesquisar por ano",1,"p-column-filter","form-control-plaintext",3,"value","input"],[3,"pSelectableRow"],[1,"p-column-title"],[1,"text-center"],[1,"image-text","text-center"],[1,"image-text"],[1,"image-text","text-center","mb-5"],["class","text-center",4,"ngIf"],["type","button",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn-danger",3,"click"],["colspan","4"]],template:function(e,t){if(1&e&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"h1",2),o._uU(3,"Libera\xe7\xe3o de Dados"),o.qZA(),o.qZA(),o.TgZ(4,"div",3),o.TgZ(5,"div",4),o.TgZ(6,"form",5),o.TgZ(7,"div",6),o.TgZ(8,"label",7),o._uU(9,"M\xeas para libera\xe7\xe3o"),o.qZA(),o.qZA(),o.TgZ(10,"div",8),o.TgZ(11,"label",9),o._uU(12,"M\xeas"),o.qZA(),o.TgZ(13,"select",10),o.TgZ(14,"option",11),o._uU(15,"-- Selecione --"),o.qZA(),o.YNc(16,f,2,1,"option",12),o.qZA(),o.qZA(),o.TgZ(17,"button",13),o.NdJ("click",function(){return t.seeThis()}),o._uU(18," Confirmar "),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(19,"div",14),o.TgZ(20,"p-table",15,16),o.NdJ("selectionChange",function(e){return t.selectedLiberacoes=e}),o.YNc(22,b,20,3,"ng-template",17),o.YNc(23,T,24,11,"ng-template",18),o.YNc(24,q,3,0,"ng-template",19),o.qZA(),o.qZA(),o._UZ(25,"ngx-spinner")),2&e){let e;o.xp6(6),o.Q6J("formGroup",t.form),o.xp6(10),o.Q6J("ngForOf",t.meses),o.xp6(1),o.Q6J("disabled",!(null!=(e=t.form.get("mes_liberacao"))&&e.valid)),o.xp6(3),o.Q6J("value",t.liberacoes)("selection",t.selectedLiberacoes)("responsive",!0)("rows",5)("paginator",!0)}},directives:[r._Y,r.JL,r.sg,r.EJ,r.JJ,r.u,r.YN,r.Kr,i.sg,g.iA,d.jx,c.Ro,g.lQ,g.fz,m.o,g.Ei,i.O5],styles:[""]}),e})()}];let v=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[Z.Bz.forChild(x)],Z.Bz]}),e})(),_=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[i.ez,v,r.UX,c.ef,g.U$,m.j]]}),e})()}}]);