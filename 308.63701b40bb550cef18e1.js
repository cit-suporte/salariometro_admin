(self.webpackChunkfipe_salariometro=self.webpackChunkfipe_salariometro||[]).push([[308],{5308:(i,r,o)=>{"use strict";o.r(r),o.d(r,{LoginModule:()=>C});var e=o(3013),t=o(3758),s=o(4207),n=o(3473),l=o(8583),u=o(665),a=o(8550);class d extends a.i{constructor(i="",r=""){super(),this.login=i,this.senha=r}}var c=o(639),h=o(4494),g=o(327);let f=(()=>{class i extends g.e{constructor(i){super("api/Login",i),this.injector=i}postAutenticar(i){return this.http.post(this.url,i)}}return i.\u0275fac=function(r){return new(r||i)(c.LFG(c.zs3))},i.\u0275prov=c.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var m=o(4719),p=o(9344),v=o(9866),Z=o(8609),q=o(4020);function S(i,r){1&i&&(c.TgZ(0,"small"),c._uU(1," Login obrigat\xf3rio. "),c.qZA())}function A(i,r){if(1&i&&(c.TgZ(0,"div",12),c.YNc(1,S,2,0,"small",13),c.qZA()),2&i){const i=c.oxw();let r;c.xp6(1),c.Q6J("ngIf",null==(r=i.form.get("login"))||null==r.errors?null:r.errors.required)}}function b(i,r){1&i&&(c.TgZ(0,"small"),c._uU(1," Senha obrigat\xf3ria. "),c.qZA())}function w(i,r){if(1&i&&(c.TgZ(0,"div",12),c.YNc(1,b,2,0,"small",13),c.qZA()),2&i){const i=c.oxw();let r;c.xp6(1),c.Q6J("ngIf",null==(r=i.form.get("password"))||null==r.errors?null:r.errors.required)}}let x=(()=>{class i{constructor(i,r,o,e,t,s,n,l){this.route=i,this.fb=r,this.loginService=o,this.sessionService=e,this.router=t,this.toastr=s,this.spinner=n,this.header=l,this.item=new d,this.submitted=!1,this.showConfirmacao=!1,this.form=this.fb.group({login:[null,[u.kI.required]],password:[null,[u.kI.required]]})}ngOnInit(){}buildLogin(){var i,r;this.item.login=(null===(i=this.form.controls.login)||void 0===i?void 0:i.value)||"",this.item.senha=(null===(r=this.form.controls.password)||void 0===r?void 0:r.value)||""}onSubmit(){if(this.submitted=!0,this.form.valid)this.spinner.show(),this.buildLogin(),this.loginService.postAutenticar(this.item).subscribe(i=>{i.flBloqueio?this.toastr.warning("Usu\xe1rio bloqueado. Contate o Administrador."):(this.sessionService.usuario.idUsuario=i.idUsuario,this.sessionService.usuario.cdUsuario=i.cdUsuario,this.sessionService.usuario.dsEmail=i.dsEmail,this.sessionService.usuario.nmUsuario=i.nmUsuario,this.sessionService.usuario.dsPerfil=i.dsPerfil,this.sessionService.usuario.flAlteraSenha=i.flAlteraSenha,this.sessionService.usuario.flBloqueio=i.flBloqueio,this.sessionService.usuario.funcionalidadePerfil=i.funcionalidadePerfil,this.sessionService.setSessao(),this.spinner.hide(),i.flAlteraSenha?this.router.navigate(["senha"]):(this.header.fnHabilitarMenu(),this.router.navigate(["home"])))},i=>{this.toastr.error(i.error),this.spinner.hide()});else for(let i in this.form.controls)this.form.controls[i].markAsTouched()}}return i.\u0275fac=function(r){return new(r||i)(c.Y36(h.gz),c.Y36(u.qu),c.Y36(f),c.Y36(m.m),c.Y36(h.F0),c.Y36(p._W),c.Y36(v.t2),c.Y36(Z.G))},i.\u0275cmp=c.Xpm({type:i,selectors:[["app-login"]],decls:21,vars:3,consts:[[3,"formGroup","ngSubmit"],["header","Bem-vindo ao Salari\xf4metro","styleClass","container"],[1,"ui-grid","ui-grid-responsive","ui-grid-pad","ui-fluid",2,"margin","10px 0px"],[1,"ui-grid-row"],[1,"form-group","col-12"],["type","text","formControlName","login",1,"form-control"],["class","text-danger",4,"ngIf"],["type","password","formControlName","password",1,"form-control"],[1,"ui-grid-col-2"],[1,"ui-grid-col-6"],["pButton","","type","submit","label","Entrar"],[1,"ui-grid-col-4"],[1,"text-danger"],[4,"ngIf"]],template:function(i,r){if(1&i&&(c.TgZ(0,"form",0),c.NdJ("ngSubmit",function(){return r.onSubmit()}),c.TgZ(1,"p-panel",1),c.TgZ(2,"div",2),c.TgZ(3,"div",3),c.TgZ(4,"div",4),c.TgZ(5,"label"),c._uU(6,"E-mail (Login)"),c.qZA(),c._UZ(7,"input",5),c.YNc(8,A,2,1,"div",6),c.qZA(),c.qZA(),c.TgZ(9,"div",3),c.TgZ(10,"div",4),c.TgZ(11,"label"),c._uU(12,"Senha"),c.qZA(),c._UZ(13,"input",7),c.YNc(14,w,2,1,"div",6),c.qZA(),c.qZA(),c.TgZ(15,"div",3),c.TgZ(16,"div",8),c._uU(17,"\xa0"),c.qZA(),c.TgZ(18,"div",9),c._UZ(19,"button",10),c.qZA(),c._UZ(20,"div",11),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&i){let i,o;c.Q6J("formGroup",r.form),c.xp6(8),c.Q6J("ngIf",(null==(i=r.form.get("login"))?null:i.invalid)&&(null==(i=r.form.get("login"))?null:i.touched)),c.xp6(6),c.Q6J("ngIf",(null==(o=r.form.get("password"))?null:o.invalid)&&(null==(o=r.form.get("password"))?null:o.touched))}},directives:[u._Y,u.JL,u.sg,q.s,u.Fj,u.JJ,u.u,l.O5,s.Hq],styles:[".ui-grid-row[_ngcontent-%COMP%]{padding-top:4px;padding-bottom:6px}[_nghost-%COMP%]     .container{max-width:30rem;margin-left:300px;margin-top:200px}"]}),i})();const T=[{path:"",component:x},{path:"esqueciSenha",component:x}];let U=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=c.oAB({type:i}),i.\u0275inj=c.cJS({imports:[[h.Bz.forChild(T)],h.Bz]}),i})();var Y=o(1841),_=o(4885),J=o(4466);let C=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=c.oAB({type:i}),i.\u0275inj=c.cJS({providers:[e.YP],imports:[[l.ez,u.UX,u.u5,Y.JF,_.zH,J.m,q.Q,p.Rh,v.ef,U,n.D,s.hJ,t.$]]}),i})()}}]);