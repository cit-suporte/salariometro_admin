(self.webpackChunkfipe_salariometro=self.webpackChunkfipe_salariometro||[]).push([[992],{5992:(a,t,o)=>{"use strict";o.r(t),o.d(t,{AssinaturaModule:()=>sa});var e=o(8583),i=o(8550);class r extends i.i{constructor(){super(...arguments),this.idSituacao=0,this.dsSituacao=""}}var s=o(665),n=o(639),u=o(327);let c=(()=>{class a extends u.e{constructor(a){super("api/assinatura",a),this.injetor=a}getSituacao(){return this.http.get(`${this.url}/getSituacoes`)}getAssinatura(){return this.http.get(`${this.url}`)}getAssinaturaById(a){return this.http.get(`${this.url}/getById/?idPedido=${a}`)}getProdutos(a){return this.http.get(`${this.url}/getProdutos/?idPedido=${a}`)}getAlteracoes(a){return this.http.get(`${this.url}/getLogAlteracoes/?idPedido=${a}`)}getObservacaos(a){return this.http.get(`${this.url}/getObservacaos/?idPedido=${a}`)}postAtualizarCortesia(a){return this.http.post(`${this.url}/UpdateCortesia`,a)}putSituacao(a){return this.http.put(`${this.url}`,a)}}return a.\u0275fac=function(t){return new(t||a)(n.LFG(n.zs3))},a.\u0275prov=n.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var l=o(3013),p=o(9344),d=o(9866),g=o(4719),Z=o(4494),h=o(7930),m=o(3928);function _(a,t){if(1&a&&(n.TgZ(0,"option"),n._uU(1),n.qZA()),2&a){const a=t.$implicit;n.xp6(1),n.Oqu(a.dsSituacao)}}function A(a,t){if(1&a){const a=n.EpF();n.TgZ(0,"tr"),n.TgZ(1,"th",17),n._uU(2," Id "),n._UZ(3,"p-sortIcon",18),n.qZA(),n.TgZ(4,"th",19),n._uU(5," Organiza\xe7\xe3o "),n._UZ(6,"p-sortIcon",20),n.qZA(),n.TgZ(7,"th",21),n._uU(8," Nome "),n._UZ(9,"p-sortIcon",22),n.qZA(),n.TgZ(10,"th",23),n._uU(11," Data da Compra "),n._UZ(12,"p-sortIcon",24),n.qZA(),n.TgZ(13,"th",25),n._uU(14," Valor "),n._UZ(15,"p-sortIcon",26),n.qZA(),n.TgZ(16,"th",27),n._uU(17," Situa\xe7\xe3o"),n._UZ(18,"p-sortIcon",28),n.qZA(),n.TgZ(19,"th",29),n._uU(20," Cortesia"),n._UZ(21,"p-sortIcon",30),n.qZA(),n.TgZ(22,"th",31),n._uU(23,"A\xe7\xf5es"),n.qZA(),n.qZA(),n.TgZ(24,"tr"),n.TgZ(25,"th"),n.TgZ(26,"input",32),n.NdJ("input",function(t){let o;return n.CHM(a),n.oxw(),n.MAs(18).filter(null==(o=t.target)?null:o.value,"idPedido","contains")}),n.qZA(),n.qZA(),n.TgZ(27,"th"),n.TgZ(28,"input",33),n.NdJ("input",function(t){let o;return n.CHM(a),n.oxw(),n.MAs(18).filter(null==(o=t.target)?null:o.value,"organizacao","contains")}),n.qZA(),n.qZA(),n.TgZ(29,"th"),n.TgZ(30,"input",34),n.NdJ("input",function(t){let o;return n.CHM(a),n.oxw(),n.MAs(18).filter(null==(o=t.target)?null:o.value,"nome","contains")}),n.qZA(),n.qZA(),n.TgZ(31,"th"),n.TgZ(32,"input",35),n.NdJ("input",function(t){let o;return n.CHM(a),n.oxw(),n.MAs(18).filter(null==(o=t.target)?null:o.value,"dsDataCompra","contains")}),n.qZA(),n.qZA(),n.TgZ(33,"th"),n.TgZ(34,"input",36),n.NdJ("input",function(t){let o;return n.CHM(a),n.oxw(),n.MAs(18).filter(null==(o=t.target)?null:o.value,"nrValor","contains")}),n.qZA(),n.qZA(),n._UZ(35,"th"),n._UZ(36,"th"),n._UZ(37,"th"),n.qZA()}if(2&a){n.oxw();const a=n.MAs(18);n.xp6(26),n.Q6J("value",null==a.filters.idPedido?null:a.filters.idPedido.value),n.xp6(2),n.Q6J("value",null==a.filters.organizacao?null:a.filters.organizacao.value),n.xp6(2),n.Q6J("value",null==a.filters.nome?null:a.filters.nome.value),n.xp6(2),n.Q6J("value",null==a.filters.dsDataCompra?null:a.filters.dsDataCompra.value),n.xp6(2),n.Q6J("value",null==a.filters.nrValor?null:a.filters.nrValor.value)}}const f=function(a){return["aprovar",a]};function v(a,t){if(1&a){const a=n.EpF();n.TgZ(0,"tr",37),n.TgZ(1,"td"),n.TgZ(2,"span",38),n._uU(3,"Id"),n.qZA(),n.TgZ(4,"span"),n._uU(5),n.qZA(),n.qZA(),n.TgZ(6,"td"),n.TgZ(7,"span",38),n._uU(8,"Organiza\xe7\xe3o"),n.qZA(),n.TgZ(9,"span"),n._uU(10),n.qZA(),n.qZA(),n.TgZ(11,"td"),n.TgZ(12,"span",38),n._uU(13,"Nome"),n.qZA(),n.TgZ(14,"span"),n._uU(15),n.qZA(),n.qZA(),n.TgZ(16,"td",31),n.TgZ(17,"span",38),n._uU(18,"Data da Compra"),n.qZA(),n.TgZ(19,"span",39),n._uU(20),n.qZA(),n.qZA(),n.TgZ(21,"td",31),n.TgZ(22,"span",38),n._uU(23,"Valor"),n.qZA(),n.TgZ(24,"span",39),n._uU(25),n.qZA(),n.qZA(),n.TgZ(26,"td",31),n.TgZ(27,"span",38),n._uU(28,"Situa\xe7\xe3o"),n.qZA(),n.TgZ(29,"strong",40),n._uU(30),n.qZA(),n.qZA(),n.TgZ(31,"td",31),n.TgZ(32,"input",41),n.NdJ("change",function(t){const o=n.CHM(a).$implicit;let e;return n.oxw().fnAtualizarCortesiar(o,null==(e=t.target)?null:e.checked)}),n.qZA(),n.qZA(),n.TgZ(33,"td",31),n.TgZ(34,"span",38),n._uU(35,"A\xe7\xf5es"),n.qZA(),n.TgZ(36,"button",42),n._uU(37,"Alterar Situa\xe7\xe3o"),n.qZA(),n.qZA(),n.qZA()}if(2&a){const a=t.$implicit;n.Q6J("pSelectableRow",a),n.xp6(5),n.hij("5245-",a.idPedido,""),n.xp6(5),n.Oqu(a.organizacao),n.xp6(5),n.Oqu(a.nome),n.xp6(5),n.Oqu(a.dsDataCompra),n.xp6(5),n.Oqu(a.valor),n.xp6(4),n.ekj("text-primary",1==a.idSituacao)("text-success",2==a.idSituacao)("text-danger",3==a.idSituacao||4==a.idSituacao)("text-warning",5==a.idSituacao||7==a.idSituacao)("text-secondary",6==a.idSituacao||8==a.idSituacao),n.xp6(1),n.hij(" ",a.situacao," "),n.xp6(2),n.Q6J("checked",a.cortesia),n.xp6(4),n.Q6J("routerLink",n.VKq(19,f,a.idPedido))}}function q(a,t){1&a&&(n.TgZ(0,"tr"),n.TgZ(1,"td",43),n._uU(2,"N\xe3o foram encontradas Assinaturas para aprova\xe7\xe3o."),n.qZA(),n.qZA())}let T=(()=>{class a{constructor(a,t,o,e,i,s,n){this.assinaturaService=a,this.messageService=t,this.fb=o,this.toastr=e,this.spinner=i,this.sessionService=s,this.router=n,this.situacao=new r,this.perfil=""}ngOnInit(){const a=JSON.parse(sessionStorage.getItem("sessao_usuario")||"{}");void 0===a.nmUsuario?this.router.navigate(["login"]):"Admin"!==a.dsPerfil&&this.router.navigate(["home"]),a.flAlteraSenha&&this.router.navigate(["senha"]),this.form=this.fb.group({situacoes_escolhida:["",[s.kI.required]]}),this.perfil=a.dsPerfil,this.getAprovacoes(),this.getSituacoes()}fnAtualizarCortesiar(a,t){"Aprovador"===this.perfil?(this.toastr.error("Usu\xe1rio sem permiss\xe3o para essa fun\xe7\xe3o"),this.getAprovacoes()):(a.cortesia=t,this.spinner.show(),this.assinaturaService.postAtualizarCortesia(a).subscribe(a=>{this.spinner.hide(),this.toastr.success("Cortesia atualizada"),this.getAprovacoes()},a=>{this.toastr.error(a.error),this.spinner.hide()}))}getAprovacoes(){this.spinner.show(),this.assinaturaService.getAssinatura().subscribe(a=>{this.spinner.hide(),this.aprovacoesInicial=a,this.aprovacoes=a},a=>{})}getSituacoes(){this.spinner.show(),this.assinaturaService.getSituacao().subscribe(a=>{this.spinner.hide(),this.situacoes=a})}seeThis(){var a;const t=null===(a=this.form.get("situacoes_escolhida"))||void 0===a?void 0:a.value;this.aprovacoes=""==t?this.aprovacoesInicial:this.aprovacoesInicial.filter(a=>a.situacao==t)}}return a.\u0275fac=function(t){return new(t||a)(n.Y36(c),n.Y36(l.ez),n.Y36(s.qu),n.Y36(p._W),n.Y36(d.t2),n.Y36(g.m),n.Y36(Z.F0))},a.\u0275cmp=n.Xpm({type:a,selectors:[["app-liberacao-list"]],decls:23,vars:7,consts:[[1,"row","pb-4"],[1,"col-md-6"],[1,"h2"],[1,"col","md-6"],[1,"form-row","pb-4"],[1,"form-inline",3,"formGroup"],[1,"form-group"],["for","staticMes"],["for","inputMes",1,"sr-only"],["id","inputSituacao","formControlName","situacoes_escolhida",1,"form-control",3,"change"],["value",""],[4,"ngFor","ngForOf"],["selectionMode","single","dataKey","idPedido","styleClass","p-datatable-gridlines",3,"value","selection","responsive","rows","paginator","selectionChange"],["dt1",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pSortableColumn","idPedido",1,"text-center"],["field","idPedido"],["pSortableColumn","organizacao",1,"text-center"],["field","organizacao"],["pSortableColumn","nome",1,"text-center"],["field","nome"],["pSortableColumn","dataCompra",1,"text-center"],["field","dataCompra"],["pSortableColumn","nrValor",1,"text-center"],["field","nrValor"],["pSortableColumn","situacao",1,"text-center"],["field","situacao"],["pSortableColumn","cortesia",1,"text-center"],["field","cortesia"],[1,"text-center"],["pInputText","","type","text","placeholder","pesquisar por id",1,"p-column-filter","form-control-plaintext",3,"value","input"],["pInputText","","type","text","placeholder","pesquisar por organiza\xe7\xe3o",1,"p-column-filter","form-control-plaintext",3,"value","input"],["pInputText","","type","text","placeholder","pesquisar por nome do cliente",1,"p-column-filter","form-control-plaintext",3,"value","input"],["pInputText","","type","text","placeholder","pesquisar pela Data da Compra",1,"p-column-filter","form-control-plaintext",3,"value","input"],["pInputText","","type","text","placeholder","pesquisar por valor",1,"p-column-filter","form-control-plaintext",3,"value","input"],[3,"pSelectableRow"],[1,"p-column-title"],[1,"image-text"],[1,"image-text","text-center","mb-5"],["type","checkbox","value","param.cortesia",3,"checked","change"],[1,"btn","btn-primary","mr-4",3,"routerLink"],["colspan","8"]],template:function(a,t){1&a&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.TgZ(2,"h1",2),n._uU(3,"Aprova\xe7\xe3o de Assinaturas"),n.qZA(),n.qZA(),n.TgZ(4,"div",3),n.TgZ(5,"div",4),n.TgZ(6,"form",5),n.TgZ(7,"div",6),n.TgZ(8,"label",7),n._uU(9,"Situa\xe7\xe3o:\xa0\xa0"),n.qZA(),n.qZA(),n.TgZ(10,"div",6),n.TgZ(11,"label",8),n._uU(12,"M\xeas"),n.qZA(),n.TgZ(13,"select",9),n.NdJ("change",function(){return t.seeThis()}),n.TgZ(14,"option",10),n._uU(15,"-- Selecione --"),n.qZA(),n.YNc(16,_,2,1,"option",11),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(17,"p-table",12,13),n.NdJ("selectionChange",function(a){return t.selectedAprovacoes=a}),n.YNc(19,A,38,5,"ng-template",14),n.YNc(20,v,38,21,"ng-template",15),n.YNc(21,q,3,0,"ng-template",16),n.qZA(),n._UZ(22,"ngx-spinner")),2&a&&(n.xp6(6),n.Q6J("formGroup",t.form),n.xp6(10),n.Q6J("ngForOf",t.situacoes),n.xp6(1),n.Q6J("value",t.aprovacoes)("selection",t.selectedAprovacoes)("responsive",!0)("rows",5)("paginator",!0))},directives:[s._Y,s.JL,s.sg,s.EJ,s.JJ,s.u,s.YN,s.Kr,e.sg,h.iA,l.jx,d.Ro,h.lQ,h.fz,m.o,h.Ei,Z.rH],styles:[""]}),a})();class b extends i.i{constructor(){super(...arguments),this.idPedido=0,this.organizacao="",this.login="",this.nome="",this.dataCompra=new Date,this.dsDataCompra="",this.valor="",this.nrValor=0,this.novoValorVenda=0,this.novaDataAgendamento=new Date,this.novaDataProrrogacao=new Date,this.idSituacao=0,this.situacao="",this.cortesia=!1,this.dsCortesia="",this.nmCortesia="",this.idRelatorio="",this.dsRelatorio="",this.idUsuario=0,this.dsObservacao="",this.flCancelaNotaSemPgto=!1,this.flCancelaNotaComPgto=!1,this.flAntecipacaoNota=!1,this.nrDiasAgendamentoPgto=-1,this.nrDiasProrrogacaoPgto=-1,this.dtAgendamento=new Date,this.dsDtAgendamento="",this.dtProrrogacao=new Date,this.dsDtProrrogacao="",this.produtoCustomizado=0,this.produtoConsultoria=0}}var U=o(7745),x=o(669);function C(a,t){if(1&a&&(n.TgZ(0,"div",28),n._UZ(1,"br"),n.TgZ(2,"h3",29),n._uU(3),n.qZA(),n.qZA()),2&a){const a=n.oxw();n.xp6(3),n.hij("#Pedido: 5245-",a.assinatura.idPedido,"")}}function S(a,t){if(1&a&&(n.TgZ(0,"p"),n.TgZ(1,"strong"),n._uU(2,"Data de Agendamento do Pagamento: "),n.qZA(),n._uU(3),n.qZA()),2&a){const a=n.oxw();n.xp6(3),n.hij(" ",a.assinatura.dsDtAgendamento,"")}}function N(a,t){if(1&a&&(n.TgZ(0,"p"),n.TgZ(1,"strong"),n._uU(2,"Data da Prorroga\xe7\xe3o do Pagamento: "),n.qZA(),n._uU(3),n.qZA()),2&a){const a=n.oxw();n.xp6(3),n.hij(" ",a.assinatura.dsDtProrrogacao,"")}}function w(a,t){1&a&&(n.TgZ(0,"tr"),n.TgZ(1,"th"),n._uU(2,"Produto"),n.qZA(),n.TgZ(3,"th"),n._uU(4,"Valor"),n.qZA(),n.TgZ(5,"th"),n._uU(6,"Vencimento"),n.qZA(),n.qZA())}function I(a,t){if(1&a&&(n.TgZ(0,"tr"),n.TgZ(1,"td"),n._uU(2),n.qZA(),n.TgZ(3,"td"),n._uU(4),n.qZA(),n.TgZ(5,"td"),n._uU(6),n.qZA(),n.qZA()),2&a){const a=t.$implicit;n.xp6(2),n.Oqu(a.descricao),n.xp6(2),n.Oqu(a.valor),n.xp6(2),n.Oqu(a.vencimento)}}function O(a,t){1&a&&(n.TgZ(0,"tr"),n.TgZ(1,"th"),n._uU(2,"Data"),n.qZA(),n.TgZ(3,"th"),n._uU(4,"Usu\xe1rio"),n.qZA(),n.TgZ(5,"th"),n._uU(6,"A\xe7\xe3o"),n.qZA(),n.qZA())}function J(a,t){if(1&a&&(n.TgZ(0,"tr"),n.TgZ(1,"td"),n._uU(2),n.qZA(),n.TgZ(3,"td"),n._uU(4),n.qZA(),n.TgZ(5,"td"),n._uU(6),n.qZA(),n.qZA()),2&a){const a=t.$implicit;n.xp6(2),n.Oqu(a.data),n.xp6(2),n.Oqu(a.dsUsuario),n.xp6(2),n.Oqu(a.descricao)}}function P(a,t){1&a&&(n.TgZ(0,"tr"),n.TgZ(1,"th"),n._uU(2,"Data"),n.qZA(),n.TgZ(3,"th"),n._uU(4,"Usu\xe1rio"),n.qZA(),n.TgZ(5,"th"),n._uU(6,"A\xe7\xe3o"),n.qZA(),n.qZA())}function Y(a,t){if(1&a&&(n.TgZ(0,"tr"),n.TgZ(1,"td"),n._uU(2),n.qZA(),n.TgZ(3,"td"),n._uU(4),n.qZA(),n.TgZ(5,"td"),n._uU(6),n.qZA(),n.qZA()),2&a){const a=t.$implicit;n.xp6(2),n.Oqu(a.data),n.xp6(2),n.Oqu(a.dsUsuario),n.xp6(2),n.Oqu(a.descricao)}}function y(a,t){1&a&&(n.TgZ(0,"option",30),n._uU(1,"Encaminhar para verifica\xe7\xe3o de pagamento"),n.qZA())}function D(a,t){1&a&&(n.TgZ(0,"option",30),n._uU(1,"Rencaminhar para verifica\xe7\xe3o de pagamento"),n.qZA())}function Q(a,t){1&a&&(n.TgZ(0,"option",31),n._uU(1,"Agendar Pagamento"),n.qZA())}function z(a,t){1&a&&(n.TgZ(0,"option",32),n._uU(1,"Registrar solu\xe7\xe3o de problema"),n.qZA())}function k(a,t){1&a&&(n.TgZ(0,"option",33),n._uU(1,"Prorrogar pagamento"),n.qZA())}function M(a,t){1&a&&(n.TgZ(0,"option",34),n._uU(1,"Cancelar (sem pagamento)"),n.qZA())}function j(a,t){1&a&&(n.TgZ(0,"option",35),n._uU(1,"Cancelar (arrependimento)"),n.qZA())}function V(a,t){1&a&&(n.TgZ(0,"label",36),n._uU(1,"*Op\xe7\xe3o utilizada para o fluxo normal de assinatura. Ao realizar essa a\xe7\xe3o ser\xe1 disparado um e-mail para equipe de Contas a Receber solicitando verifica\xe7\xe3o do Pagamento"),n.qZA())}function $(a,t){1&a&&(n.TgZ(0,"label",36),n._uU(1,"*Op\xe7\xe3o que permite a aprova\xe7\xe3o pela Equipe do Salari\xf4metro da assinatura do cliente mediante a uma promessa de pagamento futura. N\xfamero m\xednimo de dias de agendamento igual a 1. Um e-mail ser\xe1 dispado para o cliente confirmando a libera\xe7\xe3o da assinatura. Obs. Para calculo da data do pagamento agendado considerar Data de Compra + N\xfamero de dias"),n.qZA())}function F(a,t){1&a&&(n.TgZ(0,"label",36),n._uU(1,"*Op\xe7\xe3o que registra a solu\xe7\xe3o dada a um problema aberto pela equipe de Contas a Receber. Um e-mail ser\xe1 disparado para que a equipe do Contas a Receber informando a resolu\xe7\xe3o do problema.Obs. Equipe do Salari\xf4metro n\xe3o registra problemas, apenas solu\xe7\xf5es e observa\xe7\xf5es. "),n.qZA())}function R(a,t){1&a&&(n.TgZ(0,"label",36),n._uU(1,"*Op\xe7\xe3o exclusiva da equipe do Salari\xf4metro para registrar detalhes e problemas com a assinatura. Obs. N\xe3o h\xe1 disparo de e-mails. Obs. Para calculo da data do pagamento agendado considerar Data de Compra + N\xfamero de dias agendados + N\xfamero de dias prorroga\xe7\xe3o"),n.qZA())}function E(a,t){1&a&&(n.TgZ(0,"label",36),n._uU(1,"*Op\xe7\xe3o dispon\xedvel para prorrogar a data inicial agendada para pagamento da assinatura. Um e-mail ser\xe1 disparado para o cliente informando a prorroga\xe7\xe3o do pagamento."),n.qZA())}function H(a,t){1&a&&(n.TgZ(0,"label",36),n._uU(1,"*Op\xe7\xe3o que permite cancelar assinaturas em que o pagamento n\xe3o tenha sido realizado. Um e-mail ser\xe1 disparado para o cliente informando o cancelamento. Obs. Para casos de agendamento h\xe1 a op\xe7\xe3o de solicitar o cancelamento da nota fiscal antecipada. Um e-mail ser\xe1 disparado ao faturamento caso seja necess\xe1rio cancelar a nota antecipada."),n.qZA())}function L(a,t){1&a&&(n.TgZ(0,"label",36),n._uU(1,"*Op\xe7\xe3o que permite cancelar assinaturas em que o pagamento tenha sido realizado. Obs. Lei do Arrependimento, por exemplo. Um e-mail ser\xe1 disparado ao faturamento caso seja necess\xe1rio cancelar a nota fiscal."),n.qZA())}function B(a,t){1&a&&(n.TgZ(0,"div",9),n.TgZ(1,"div",37),n.TgZ(2,"label",38),n._uU(3,"Programar pagamento para\xa0\xa0"),n.qZA(),n._UZ(4,"input",39),n._uU(5,"\xa0\xa0 "),n.TgZ(6,"label",38),n._uU(7,"dia(s)"),n.qZA(),n.qZA(),n.qZA())}function G(a,t){1&a&&(n.TgZ(0,"div",9),n.TgZ(1,"div",37),n.TgZ(2,"label",40),n._uU(3,"Programar pagamento para\xa0\xa0"),n.qZA(),n._UZ(4,"input",41),n._uU(5,"\xa0\xa0 "),n.TgZ(6,"label",40),n._uU(7,"dia(s)"),n.qZA(),n.qZA(),n.qZA())}function K(a,t){1&a&&(n.TgZ(0,"div",9),n.TgZ(1,"div",37),n.TgZ(2,"div",42),n.TgZ(3,"label",43),n._uU(4,"Valor de venda:\xa0"),n.qZA(),n.TgZ(5,"div",44),n.TgZ(6,"span",45),n._uU(7,"$"),n.qZA(),n._UZ(8,"input",46),n.TgZ(9,"span",45),n._uU(10,",00"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA())}function X(a,t){1&a&&(n.TgZ(0,"div",9),n.TgZ(1,"div",10),n.TgZ(2,"label",47),n._uU(3,"Id do relat\xf3rio:\xa0"),n.qZA(),n._UZ(4,"input",48),n._uU(5,"\xa0\xa0 "),n.qZA(),n.qZA())}function W(a,t){1&a&&(n.TgZ(0,"div",9),n.TgZ(1,"div",10),n.TgZ(2,"label",49),n._uU(3,"Descri\xe7\xe3o do relat\xf3rio:\xa0"),n.qZA(),n._UZ(4,"input",50),n._uU(5,"\xa0\xa0 "),n.qZA(),n.qZA())}function aa(a,t){1&a&&(n.TgZ(0,"div",9),n._uU(1,"np "),n.TgZ(2,"div",37),n.TgZ(3,"label"),n._uU(4,"Cancela nota fiscal?\xa0\xa0"),n.qZA(),n._UZ(5,"input",51),n.TgZ(6,"label",52),n._uU(7,"\xa0\xa0Sim\xa0\xa0"),n.qZA(),n._UZ(8,"input",53),n.TgZ(9,"label",54),n._uU(10,"\xa0\xa0N\xe3o\xa0\xa0"),n.qZA(),n.qZA(),n.qZA())}function ta(a,t){1&a&&(n.TgZ(0,"div",9),n.TgZ(1,"div",37),n.TgZ(2,"label"),n._uU(3,"Cancela nota fiscal?\xa0\xa0"),n.qZA(),n._UZ(4,"input",55),n.TgZ(5,"label",52),n._uU(6,"\xa0\xa0Sim\xa0\xa0"),n.qZA(),n._UZ(7,"input",56),n.TgZ(8,"label",54),n._uU(9,"\xa0\xa0N\xe3o\xa0\xa0"),n.qZA(),n.qZA(),n.qZA())}function oa(a,t){if(1&a){const a=n.EpF();n.TgZ(0,"div",57),n.TgZ(1,"div",58),n.TgZ(2,"button",59),n.NdJ("click",function(){return n.CHM(a),n.oxw().executarAcaoAssinatura()}),n._uU(3," Salvar "),n.qZA(),n.qZA(),n.TgZ(4,"div",58),n.TgZ(5,"button",60),n._uU(6," Voltar "),n.qZA(),n.qZA(),n.qZA()}}const ea=function(){return{width:"1024px","background-color":"\t#F5F5F5"}},ia=[{path:"",component:T},{path:"aprovar/:id",component:(()=>{class a{constructor(a,t,o,e,i,r,n){this.route=a,this.fb=t,this.assinaturaService=o,this.router=e,this.toastr=i,this.spinner=r,this.sessionService=n,this.currentAction="",this.pageTitle="Gest\xe3o de Assinaturas",this.valorMonetario=0,this.produtos=[],this.pbservacaos=[],this.alteracoes=[],this.assinatura=new b,this.perfil="",this.situacao=0,this.usuario=0,this.showConfirmacao=!0,this.exbibeObservacao=!0,this.opcaoAcao="",this.dataMinima="",this.selecione=0,this.aguardando_pagamento=1,this.aprovado=2,this.cancelar_sem_pgto=3,this.cancelar_arrependimento=4,this.registrar_problema_fluxo_normal=5,this.agendar_pgto=6,this.registrar_problema_agendamento=7,this.encaminhar_contas_a_receber=8,this.registrar_solucao_fluxo_normal=9,this.registrar_solucao_agendamento=10,this.prorrogar_pgto=11,this.encaminhar_contas_a_receber_agendamento=12,this.form=this.fb.group({selecao_acao:[null,[s.kI.required]],input_dias_agendamento:0,input_dias_prorrogacao:0,dt_agendamento:null,input_valor_venda:[null,{locale:"en-US"}],input_id_relatorio:"",input_ds_relatorio:"",selecao_antecipa_nota:!1,selecao_cancela_nota_arrependimento:!1,selecao_cancela_nota_sem_pgto:!1})}ngOnInit(){const a=JSON.parse(sessionStorage.getItem("sessao_usuario")||"{}");void 0===a.nmUsuario&&this.router.navigate(["login"]),a.flAlteraSenha&&this.router.navigate(["senha"]),this.perfil=a.dsPerfil,this.usuario=a.idUsuario;var t=new Date,o=t.getDate(),e=t.getMonth()+1,i="",r="",s=t.getFullYear();o<10&&(r="0"+o),e<10&&(i="0"+e),this.dataMinima=s.toString()+"-"+i+"-"+r,this.loadAssinatura(),this.getProdutos(),this.getAlteracoes(),this.getObservacaos()}loadAssinatura(){this.spinner.show(),this.route.params.subscribe(a=>{this.assinaturaService.getAssinaturaById(+a.id).subscribe(a=>{this.assinatura=a,"Aprovador"===this.perfil?this.exbibeObservacao=1===a.idSituacao||5===a.idSituacao:3!==a.idSituacao&&4!==a.idSituacao||(this.exbibeObservacao=!1),this.situacao=a.idSituacao,this.spinner.hide()})},a=>{console.log(a)})}getProdutos(){this.spinner.show(),this.route.params.subscribe(a=>{this.assinaturaService.getProdutos(+a.id).subscribe(a=>{this.produtos=a,this.spinner.hide()})},a=>{console.log(a)})}getAlteracoes(){this.spinner.show(),this.route.params.subscribe(a=>{this.assinaturaService.getAlteracoes(+a.id).subscribe(a=>{this.alteracoes=a,this.spinner.hide()})},a=>{console.log(a)})}getObservacaos(){this.spinner.show(),this.route.params.subscribe(a=>{this.assinaturaService.getObservacaos(+a.id).subscribe(a=>{this.pbservacaos=a,this.spinner.hide()})},a=>{console.log(a)})}isNumeric(a){return"number"==typeof a}executarAcaoAssinatura(){var a,t,o,e,i,r,s,n;this.spinner.show(),this.showConfirmacao=!0,new Date;let u=(null===(a=this.form.controls.input_dias_agendamento)||void 0===a?void 0:a.value)||"",c=(null===(t=this.form.controls.selecao_antecipa_nota)||void 0===t?void 0:t.value)||"",l=(null===(o=this.form.controls.input_valor_venda)||void 0===o?void 0:o.value)||"",p=(null===(e=this.form.controls.input_id_relatorio)||void 0===e?void 0:e.value)||"",d=(null===(i=this.form.controls.input_ds_relatorio)||void 0===i?void 0:i.value)||"",g=(null===(r=this.form.controls.selecao_cancela_nota_arrependimento)||void 0===r?void 0:r.value)||"",Z=(null===(s=this.form.controls.input_dias_prorrogacao)||void 0===s?void 0:s.value)||"",h=(null===(n=this.form.controls.selecao_cancela_nota_sem_pgto)||void 0===n?void 0:n.value)||"",m=document.getElementById("dsObservacao").value;if(this.assinatura.dsObservacao=m,this.assinatura.idUsuario=this.usuario,this.assinatura.idRelatorio=p,this.assinatura.dsRelatorio=d,(this.assinatura.produtoCustomizado>0||this.assinatura.produtoConsultoria>0)&&(this.assinatura.novoValorVenda=parseFloat(l)),""===m)this.spinner.hide(),this.showConfirmacao=!1,this.toastr.error("Descreva o problema no campo 'Observa\xe7\xf5es'.");else{switch(this.opcaoAcao){case"encaminhar_contas_a_receber":this.assinatura.idSituacao=this.encaminhar_contas_a_receber,(this.assinatura.produtoCustomizado>0||this.assinatura.produtoConsultoria>0)&&l<=0&&(this.spinner.hide(),this.showConfirmacao=!1,this.toastr.error("Valor de venda inv\xe1lido."));break;case"agendar_pgto":(this.assinatura.produtoCustomizado>0||this.assinatura.produtoConsultoria>0)&&l<=0&&(this.spinner.hide(),this.showConfirmacao=!1,this.toastr.error("Valor de venda inv\xe1lido.")),0!=u&&null!=u&&null!=u||(this.spinner.hide(),this.showConfirmacao=!1,this.toastr.error("Informe o tempo do agendamento em dias (valor m\xednimo de 1 dia)")),"sim"==c&&(this.assinatura.flAntecipacaoNota=!0),this.assinatura.idSituacao=this.agendar_pgto,this.assinatura.nrDiasAgendamentoPgto=u;break;case"registrar_solucao":this.assinatura.idSituacao=this.assinatura.idSituacao==this.registrar_problema_fluxo_normal?this.registrar_solucao_fluxo_normal:this.registrar_solucao_agendamento;break;case"registrar_observacao":break;case"prorrogar_pgto":(this.assinatura.produtoCustomizado>0||this.assinatura.produtoConsultoria>0)&&l<=0&&(this.spinner.hide(),this.showConfirmacao=!1,this.toastr.error("Valor de venda inv\xe1lido.")),0!=Z&&null!=Z&&null!=Z||(this.spinner.hide(),this.showConfirmacao=!1,this.toastr.error("Informe o tempo da programa\xe7\xe3o em dias.")),this.assinatura.idSituacao=this.prorrogar_pgto,this.assinatura.nrDiasProrrogacaoPgto=Z;break;case"cancelar_sem_pgto":"sim"===h&&(this.assinatura.flCancelaNotaSemPgto=!0),this.assinatura.idSituacao=this.cancelar_sem_pgto;break;case"cancelar_arrependimento":"sim"==g&&(this.assinatura.flCancelaNotaComPgto=!0),this.assinatura.idSituacao=this.cancelar_arrependimento;break;default:this.spinner.hide(),this.showConfirmacao=!1,this.toastr.error("Selecione uma a\xe7\xe3o")}this.showConfirmacao&&this.assinaturaService.putSituacao(this.assinatura).subscribe(a=>{this.toastr.success("A\xe7\xe3o realizada com sucesso!"),this.spinner.hide(),this.router.navigate(["assinatura"])},a=>{this.toastr.error("Ocorreu um erro no processo, verifique se os dados est\xe3o corretos!")})}}selecionaOpcaoAcao(){var a;this.opcaoAcao=(null===(a=this.form.controls.selecao_acao)||void 0===a?void 0:a.value)||""}}return a.\u0275fac=function(t){return new(t||a)(n.Y36(Z.gz),n.Y36(s.qu),n.Y36(c),n.Y36(Z.F0),n.Y36(p._W),n.Y36(d.t2),n.Y36(g.m))},a.\u0275cmp=n.Xpm({type:a,selectors:[["app-assinatura-form"]],decls:125,vars:40,consts:[[1,"content","mb-2",2,"color","white","background-color","rgb(71, 71, 71)","width","1024px"],[1,"h2","pl-2","mb-4"],[1,"content","mb-5"],["enctype","multipart/form-data",1,"form-inline",3,"formGroup"],["styleClass","shadow-3"],["pTemplate","header"],[4,"ngIf"],["responsiveLayout","scroll",3,"value"],["pTemplate","body"],[1,"row","mt-4"],[1,"form-group","col-12"],["for","selecao_acao"],["id","selecao_acao","formControlName","selecao_acao","type","text",1,"form-control",2,"width","86%",3,"change"],["value","selecione","selected",""],["value","encaminhar_contas_a_receber",4,"ngIf"],["value","agendar_pgto",4,"ngIf"],["value","registrar_solucao",4,"ngIf"],["value","registrar_observacao"],["value","prorrogar_pgto",4,"ngIf"],["value","cancelar_sem_pgto",4,"ngIf"],["value","cancelar_arrependimento",4,"ngIf"],[1,"row","mt-2"],["class","fonte",4,"ngIf"],["class","row mt-4",4,"ngIf"],[1,"form-group","col-12","mt-1"],[1,"form-group","col-12","mt-3"],["pInputTextarea","","rows","8","cols","132","maxlength","1024","id","dsObservacao"],["pTemplate","footer"],[2,"margin-left","15px","margin-right","15px","border","1px solid"],[2,"margin-left","10px"],["value","encaminhar_contas_a_receber"],["value","agendar_pgto"],["value","registrar_solucao"],["value","prorrogar_pgto"],["value","cancelar_sem_pgto"],["value","cancelar_arrependimento"],[1,"fonte"],[1,"form-group","col-6"],["for","input_dias_agendamento"],["type","number","formControlName","input_dias_agendamento",1,"form-control",2,"width","100px"],["for","input_dias_prorrogacao"],["type","number","formControlName","input_dias_prorrogacao",1,"form-control",2,"width","100px"],[1,"input-group"],["for","input_valor_venda"],[1,"input-group-append"],[1,"input-group-text"],["type","text","formControlName","input_valor_venda","oninput","this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\\..*)\\./g, '$1');",1,"form-control",2,"width","100px"],["for","input_id_relatorio"],["type","text","formControlName","input_id_relatorio",1,"form-control",2,"width","200px"],["for","input_ds_relatorio"],["type","text","formControlName","input_ds_relatorio",1,"form-control",2,"width","500px"],["type","radio","id","sim","formControlName","selecao_cancela_nota_arrependimento","name","selecao_cancela_nota_arrependimento_name","value","sim"],["for","sim"],["type","radio","id","nao","formControlName","selecao_cancela_nota_arrependimento","name","selecao_cancela_nota_arrependimento_name","value","nao","checked",""],["for","nao"],["type","radio","id","sim","formControlName","selecao_cancela_nota_sem_pgto","name","selecao_cancela_nota_sem_pgto_name","value","sim"],["type","radio","id","nao","formControlName","selecao_cancela_nota_sem_pgto","name","selecao_cancela_nota_sem_pgto_name","value","nao","checked",""],[1,"row"],[1,"col-6","d-flex","justify-content-between","mb-1"],["type","button",1,"btn","btn-primary","btn-lg","btn-block",3,"click"],["type","button","routerLink","../../../assinatura",1,"btn","btn-secondary","btn-lg","btn-block"]],template:function(a,t){1&a&&(n.TgZ(0,"div",0),n._UZ(1,"br"),n.TgZ(2,"h2",1),n._uU(3),n.qZA(),n.qZA(),n.TgZ(4,"div",2),n.TgZ(5,"form",3),n.TgZ(6,"p-card",4),n.YNc(7,C,4,1,"ng-template",5),n.TgZ(8,"h5"),n.TgZ(9,"strong"),n._uU(10,"Dados do Comprador: "),n.qZA(),n.qZA(),n._UZ(11,"p-divider"),n.TgZ(12,"p"),n.TgZ(13,"strong"),n._uU(14,"Organina\xe7\xe3o: "),n.qZA(),n._uU(15),n.qZA(),n.TgZ(16,"p"),n.TgZ(17,"strong"),n._uU(18,"Login: "),n.qZA(),n._uU(19),n.qZA(),n.TgZ(20,"p"),n.TgZ(21,"strong"),n._uU(22,"Nome: "),n.qZA(),n._uU(23),n.qZA(),n._UZ(24,"br"),n.TgZ(25,"h5"),n.TgZ(26,"strong"),n._uU(27,"Dados da Compra: "),n.qZA(),n.qZA(),n._UZ(28,"p-divider"),n.TgZ(29,"p"),n.TgZ(30,"strong"),n._uU(31,"Data da Compra: "),n.qZA(),n._uU(32),n.qZA(),n.YNc(33,S,4,1,"p",6),n.YNc(34,N,4,1,"p",6),n.TgZ(35,"p"),n.TgZ(36,"strong"),n._uU(37,"Cortesia: "),n.qZA(),n.TgZ(38,"span"),n._uU(39),n.qZA(),n.qZA(),n.TgZ(40,"p"),n.TgZ(41,"strong"),n._uU(42,"Situacao: "),n.qZA(),n._uU(43),n.qZA(),n.TgZ(44,"p"),n.TgZ(45,"strong"),n._uU(46,"Valor Total da Compra: "),n.qZA(),n._uU(47),n.qZA(),n._UZ(48,"br"),n.TgZ(49,"h5"),n.TgZ(50,"strong"),n._uU(51,"Produtos: "),n.qZA(),n.qZA(),n._UZ(52,"p-divider"),n.TgZ(53,"p-table",7),n.YNc(54,w,7,0,"ng-template",5),n.YNc(55,I,7,3,"ng-template",8),n.qZA(),n._UZ(56,"br"),n._UZ(57,"br"),n.TgZ(58,"h5"),n.TgZ(59,"strong"),n._uU(60,"Hist\xf3rico de Altera\xe7\xf5es: "),n.qZA(),n.qZA(),n._UZ(61,"p-divider"),n.TgZ(62,"p-table",7),n.YNc(63,O,7,0,"ng-template",5),n.YNc(64,J,7,3,"ng-template",8),n.qZA(),n._UZ(65,"br"),n._UZ(66,"br"),n.TgZ(67,"h5"),n.TgZ(68,"strong"),n._uU(69,"Hist\xf3rico de Observa\xe7\xf5es: "),n.qZA(),n.qZA(),n._UZ(70,"p-divider"),n.TgZ(71,"p-table",7),n.YNc(72,P,7,0,"ng-template",5),n.YNc(73,Y,7,3,"ng-template",8),n.qZA(),n._UZ(74,"br"),n._UZ(75,"br"),n.TgZ(76,"div"),n.TgZ(77,"h5"),n.TgZ(78,"strong"),n._uU(79,"A\xe7\xf5es: "),n.qZA(),n.qZA(),n._UZ(80,"p-divider"),n.TgZ(81,"div",9),n.TgZ(82,"div",10),n.TgZ(83,"label",11),n._uU(84,"Escolha uma a\xe7\xe3o:\xa0\xa0"),n.qZA(),n.TgZ(85,"select",12),n.NdJ("change",function(){return t.selecionaOpcaoAcao()}),n.TgZ(86,"option",13),n._uU(87,"-- Selecione uma op\xe7\xe3o --"),n.qZA(),n.YNc(88,y,2,0,"option",14),n.YNc(89,D,2,0,"option",14),n.YNc(90,Q,2,0,"option",15),n.YNc(91,z,2,0,"option",16),n.TgZ(92,"option",17),n._uU(93,"Registrar observa\xe7\xe3o de controle"),n.qZA(),n.YNc(94,k,2,0,"option",18),n.YNc(95,M,2,0,"option",19),n.YNc(96,j,2,0,"option",20),n.qZA(),n.qZA(),n.qZA(),n.TgZ(97,"div",21),n.TgZ(98,"div",10),n.YNc(99,V,2,0,"label",22),n.YNc(100,$,2,0,"label",22),n.YNc(101,F,2,0,"label",22),n.YNc(102,R,2,0,"label",22),n.YNc(103,E,2,0,"label",22),n.YNc(104,H,2,0,"label",22),n.YNc(105,L,2,0,"label",22),n.qZA(),n.qZA(),n.YNc(106,B,8,0,"div",23),n.YNc(107,G,8,0,"div",23),n.YNc(108,K,11,0,"div",23),n.YNc(109,X,6,0,"div",23),n.YNc(110,W,6,0,"div",23),n.YNc(111,aa,11,0,"div",23),n.YNc(112,ta,10,0,"div",23),n.TgZ(113,"div",9),n.TgZ(114,"div",24),n.TgZ(115,"label"),n.TgZ(116,"strong"),n._uU(117,"Observa\xe7\xf5es: "),n.qZA(),n.qZA(),n.qZA(),n.TgZ(118,"div",24),n.TgZ(119,"label"),n._uU(120,"*Preenchimento obrigat\xf3rio"),n.qZA(),n.qZA(),n.TgZ(121,"div",25),n._UZ(122,"textarea",26),n.qZA(),n.qZA(),n.qZA(),n.YNc(123,oa,7,0,"ng-template",27),n.qZA(),n.qZA(),n.qZA(),n._UZ(124,"ngx-spinner")),2&a&&(n.xp6(3),n.Oqu(t.pageTitle),n.xp6(2),n.Q6J("formGroup",t.form),n.xp6(1),n.Akn(n.DdM(39,ea)),n.xp6(9),n.hij(" ",t.assinatura.organizacao,""),n.xp6(4),n.hij(" ",t.assinatura.login,""),n.xp6(4),n.hij(" ",t.assinatura.nome,""),n.xp6(9),n.hij(" ",t.assinatura.dsDataCompra,""),n.xp6(1),n.Q6J("ngIf",t.assinatura.nrDiasAgendamentoPgto>0),n.xp6(1),n.Q6J("ngIf",t.assinatura.nrDiasProrrogacaoPgto>0),n.xp6(4),n.Tol("status-true-false"),n.xp6(1),n.Oqu(t.assinatura.dsCortesia),n.xp6(4),n.hij(" ",t.assinatura.situacao,""),n.xp6(4),n.hij(" ",t.assinatura.valor,""),n.xp6(6),n.Q6J("value",t.produtos),n.xp6(9),n.Q6J("value",t.alteracoes),n.xp6(9),n.Q6J("value",t.pbservacaos),n.xp6(17),n.Q6J("ngIf",1===t.assinatura.idSituacao||6===t.assinatura.idSituacao),n.xp6(1),n.Q6J("ngIf",8===t.assinatura.idSituacao),n.xp6(1),n.Q6J("ngIf",1===t.assinatura.idSituacao),n.xp6(1),n.Q6J("ngIf",5===t.assinatura.idSituacao||7===t.assinatura.idSituacao),n.xp6(3),n.Q6J("ngIf",6===t.assinatura.idSituacao||7===t.assinatura.idSituacao),n.xp6(1),n.Q6J("ngIf",1===t.assinatura.idSituacao||5===t.assinatura.idSituacao||6===t.assinatura.idSituacao||7===t.assinatura.idSituacao||8===t.assinatura.idSituacao),n.xp6(1),n.Q6J("ngIf",2===t.assinatura.idSituacao),n.xp6(3),n.Q6J("ngIf","encaminhar_contas_a_receber"===t.opcaoAcao),n.xp6(1),n.Q6J("ngIf","agendar_pgto"===t.opcaoAcao),n.xp6(1),n.Q6J("ngIf","registrar_solucao"===t.opcaoAcao),n.xp6(1),n.Q6J("ngIf","registrar_observacao"===t.opcaoAcao),n.xp6(1),n.Q6J("ngIf","prorrogar_pgto"===t.opcaoAcao),n.xp6(1),n.Q6J("ngIf","cancelar_sem_pgto"===t.opcaoAcao),n.xp6(1),n.Q6J("ngIf","cancelar_arrependimento"===t.opcaoAcao),n.xp6(1),n.Q6J("ngIf",1===t.assinatura.idSituacao&&"agendar_pgto"===t.opcaoAcao),n.xp6(1),n.Q6J("ngIf",(6===t.assinatura.idSituacao||7===t.assinatura.idSituacao)&&"prorrogar_pgto"===t.opcaoAcao),n.xp6(1),n.Q6J("ngIf",("agendar_pgto"===t.opcaoAcao||"prorrogar_pgto"===t.opcaoAcao||"encaminhar_contas_a_receber"===t.opcaoAcao)&&(t.assinatura.produtoCustomizado>0||t.assinatura.produtoConsultoria>0)),n.xp6(1),n.Q6J("ngIf",("agendar_pgto"===t.opcaoAcao||"prorrogar_pgto"===t.opcaoAcao||"encaminhar_contas_a_receber"===t.opcaoAcao)&&t.assinatura.produtoConsultoria>0),n.xp6(1),n.Q6J("ngIf",("agendar_pgto"===t.opcaoAcao||"prorrogar_pgto"===t.opcaoAcao||"encaminhar_contas_a_receber"===t.opcaoAcao)&&t.assinatura.produtoConsultoria>0),n.xp6(1),n.Q6J("ngIf","cancelar_arrependimento"===t.opcaoAcao&&2===t.assinatura.idSituacao),n.xp6(1),n.Q6J("ngIf","cancelar_sem_pgto"===t.opcaoAcao&&6===t.assinatura.idSituacao))},directives:[s._Y,s.JL,s.sg,U.Z,l.jx,x.i,e.O5,h.iA,s.EJ,s.JJ,s.u,s.YN,s.Kr,d.Ro,s.wV,s.Fj,s._,Z.rH],styles:["img[_ngcontent-%COMP%]{opacity:.4;filter:alpha(opacity=40);height:160px}.custom-days[_ngcontent-%COMP%]{width:50px}input[type=radio][_ngcontent-%COMP%]{border:0;width:30px;height:30px}.fonte[_ngcontent-%COMP%]{font-size:small;font-weight:700}"]}),a})()}];let ra=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=n.oAB({type:a}),a.\u0275inj=n.cJS({imports:[[Z.Bz.forChild(ia)],Z.Bz]}),a})(),sa=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=n.oAB({type:a}),a.\u0275inj=n.cJS({imports:[[e.ez,ra,s.UX,d.ef,h.U$,m.j,x.x,U.d]]}),a})()}}]);